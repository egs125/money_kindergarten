(this.webpackJsonpbrown_card=this.webpackJsonpbrown_card||[]).push([[0],{226:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(18),r=n.n(a),s=n(60),o=n(28),i=n(26),u=n(19),j=n(272),b=n(279),l=n(280),p=n(281),d=n(276),m=n(277),f=n(278),x=n(11),O=n.n(x),h=n(10),v=n(103),g=(n(156),n(232),n(126)),y=n.n(g),k=v.a.initializeApp({apiKey:"AIzaSyAYZRRWgb7d2Bb3zgS-bVyydmqWTjzX1fg",authDomain:"brown-card.firebaseapp.com",projectId:"brown-card",storageBucket:"brown-card.appspot.com",messagingSenderId:"910679162147",appId:"1:910679162147:web:7c953b3a4396212cb6a096"}),w=(v.a,v.a.firestore()),I=new y.a(k),E=O.a.mark(B),M=O.a.mark(z),S=O.a.mark(U),N=O.a.mark(G),T=O.a.mark(X),C="userInfo/REGISTER",L="userInfo/LOGIN",Y="userInfo/LOGOUT",A="userInfo/SET_USER_LOGIN",P="userInfo/SET_USER_LOGOUT",R="userInfo/FAIL",D="userInfo/FAIL_ON_VALIDATION",_="userInfo/SET_ERROR_MSG",F=function(e){return{type:_,msg:e}};function B(e){var t,n,c,a;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.obj,n=t.email,c=t.password,r.next=4,Object(h.call)(I.auth.createUserWithEmailAndPassword,n,c);case 4:return a=r.sent,r.next=7,Object(h.put)({type:A,user:a});case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,Object(h.put)({type:R,msg:r.t0.message});case 13:case"end":return r.stop()}}),E,null,[[0,9]])}function z(e){var t,n,c,a;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.obj,n=t.email,c=t.password,r.next=4,Object(h.call)(I.auth.signInWithEmailAndPassword,n,c);case 4:return a=r.sent,r.next=7,Object(h.put)({type:A,user:a});case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,Object(h.put)({type:R,msg:r.t0.message});case 13:case"end":return r.stop()}}),M,null,[[0,9]])}function U(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.call)(I.auth.signOut);case 3:return e.next=5,Object(h.put)({type:P});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(h.put)({type:R,msg:e.t0.message});case 11:case"end":return e.stop()}}),S,null,[[0,7]])}function G(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.put)({type:D,msg:e.msg});case 2:case"end":return t.stop()}}),N)}function X(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(C,B);case 2:return e.next=4,Object(h.takeEvery)(L,z);case 4:return e.next=6,Object(h.takeEvery)(Y,U);case 6:return e.next=8,Object(h.takeEvery)(_,G);case 8:case"end":return e.stop()}}),T)}var q={isLoggedIn:!1,userObj:{},authMsg:{msg:"",isError:!1}};var W=n(3),K=function(){var e=Object(o.g)(),t=Object(i.b)(),n=Object(c.useState)(!1),a=Object(u.a)(n,2),r=a[0],s=a[1],x=Object(i.c)((function(e){return{isLoggedIn:e.userInfo.isLoggedIn}})).isLoggedIn,O=function(){s(!r)},h=function(t){O(),e.push("/".concat(t))};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("nav",{className:"nav-container",children:[x?Object(W.jsx)(j.a,{onClick:O,children:r?Object(W.jsx)(d.a,{}):Object(W.jsx)(m.a,{})}):Object(W.jsx)(j.a,{children:Object(W.jsx)(f.a,{})}),Object(W.jsx)("span",{className:"app-title",children:"\ube0c\uce74 \uc774\uc6a9\ub0b4\uc5ed\uc11c"})]}),r&&Object(W.jsx)("div",{className:"nav-drawer",children:Object(W.jsxs)(b.a,{children:[Object(W.jsx)(l.a,{button:!0,onClick:function(){return h("")},children:Object(W.jsx)("span",{children:"\uc694\uc57d"})}),Object(W.jsx)(l.a,{button:!0,onClick:function(){return h("expense")},children:Object(W.jsx)("span",{children:"\uc0ac\uc6a9"})}),Object(W.jsx)(l.a,{button:!0,className:"nav-drawer-last-item",onClick:function(){return h("income")},children:Object(W.jsx)("span",{children:"\ucda9\uc804"})}),x&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(p.a,{}),Object(W.jsx)(l.a,{button:!0,onClick:function(){O(),t({type:Y})},children:Object(W.jsx)("span",{children:"\ub85c\uadf8\uc544\uc6c3"})})]})]})})]})},V=n(27),H=n(23),J=n.n(H),Z=n(38);function Q(e){var t="";return e&&(t="0"===e.substr(0,1)?e.substr(1,1):e),t}function $(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ee(e,t,n){var c=n;return e[t]&&(c=e[t]),c}var te=O.a.mark(re),ne=O.a.mark(se),ce="summaryInfo/READ",ae="summaryInfo/SET_SUMMARY";function re(e){var t,n,c,a,r,s,o;return O.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=e.month,i.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){var n,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("income").where("ym","==",t).get();case 2:if(n=e.sent,!(c=n.docs)){e.next=8;break}return a=[],c.forEach((function(e){e.exists&&a.push(Object(V.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))));case 4:return n=i.sent,i.next=7,Object(h.call)(Object(Z.a)(O.a.mark((function e(){var n,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("expense").where("ym","==",t).get();case 2:if(n=e.sent,!(c=n.docs)){e.next=8;break}return a=[],c.forEach((function(e){e.exists&&a.push(Object(V.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))));case 7:if(c=i.sent,!Array.isArray(n)||!Array.isArray(c)){i.next=17;break}return a=n.reduce((function(e,t){return e+ee(t,"itemAmount",0)}),0),r=0,0,o={},c.forEach((function(e){var t=e.itemTypeName,n=ee(e,"itemPrice",0);o[t]||(o[t]=0),o[t]+=n,r+=n})),s=a-r,i.next=17,Object(h.put)({type:ae,totalIncome:a,totalExpense:r,balance:s,expensePerTypes:o});case 17:i.next=22;break;case 19:i.prev=19,i.t0=i.catch(0),console.log(i.t0);case 22:case"end":return i.stop()}}),te,null,[[0,19]])}function se(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(ce,re);case 2:case"end":return e.stop()}}),ne)}var oe={summary:{totalIncome:0,totalExpense:0,balance:0,expensePerTypes:{}}};var ie=n(282),ue=n(283),je=n(137),be=function(e){var t=e.chartOption;return Object(W.jsx)("div",{children:Object(W.jsx)(je.a,{option:t,notMerge:!0,lazyUpdate:!0,style:{height:"300px",width:"700px"}})})},le=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return{summaryInfo:e.summaryInfo.summary}})).summaryInfo,n={tooltip:{trigger:"item"},series:[{type:"pie",radius:"50%",width:"100%",height:"100%",data:[]}]},a=Object(c.useState)(J()().format("YYYY")),r=Object(u.a)(a,2),s=r[0],o=r[1],b=Object(c.useState)(J()().format("MM")),l=Object(u.a)(b,2),p=l[0],d=l[1],m=Object(c.useState)(0),f=Object(u.a)(m,2),x=f[0],O=f[1],h=Object(c.useState)(Object(V.a)({},n)),v=Object(u.a)(h,2),g=v[0],y=v[1],k=function(e){var t="";t="prev"===e?J()("".concat(s,"-").concat(p)).subtract(1,"months"):J()("".concat(s,"-").concat(p)).add(1,"months"),o(J()(t).format("YYYY")),d(J()(t).format("MM"))},w=Object(c.useCallback)((function(){var t;e((t={month:J()().format("".concat(s,"-").concat(p))},Object(V.a)({type:ce},t)))}),[s,p]),I=Object(c.useCallback)((function(){O(t.balance);var e=[],c=Object.assign({},n);Object.entries(t.expensePerTypes).forEach((function(t){var n=Object(u.a)(t,2),c=n[0],a=n[1];e.push({name:c,value:a})})),c.series[0].data=e,y(c)}),[t]);return Object(c.useEffect)((function(){w()}),[p]),Object(c.useEffect)((function(){I()}),[t]),Object(W.jsxs)("div",{className:"child-container",children:[Object(W.jsxs)("div",{className:"selected-month-box",children:[Object(W.jsx)("div",{className:"vertical-empty-space"}),Object(W.jsxs)("div",{className:"selected-month-info-box",children:[Object(W.jsx)(j.a,{onClick:function(){return k("prev")},children:Object(W.jsx)(ie.a,{})}),Object(W.jsxs)("div",{className:"selected-month-texts",children:[Object(W.jsxs)("div",{className:"title",children:[Q(p),"\uc6d4 \uc794\uc561"]}),Object(W.jsxs)("div",{className:"amount",children:[$(x),"\uc6d0"]})]}),Object(W.jsx)(j.a,{id:"next",onClick:function(){return k("next")},children:Object(W.jsx)(ue.a,{})})]})]}),Object(W.jsx)(be,{chartOption:g})]})},pe=n(291),de=n(289),me=n(284),fe=n(285),xe=n(286),Oe=function(e){var t=e.isOnRegister,n=e.email,c=e.password,a=e.toggleRegisterProcess,r=e.onChangeValue,s=e.onPressKey,o=e.handleLogin,i=e.onClickRegisterBtn;return Object(W.jsxs)("div",{className:"auth-container",children:[Object(W.jsxs)("div",{className:"icon-area",children:[Object(W.jsx)(me.a,{fontSize:"large"}),Object(W.jsx)(fe.a,{fontSize:"large"}),Object(W.jsx)(xe.a,{fontSize:"large"})]}),Object(W.jsxs)("div",{className:"input-area",children:[Object(W.jsx)(pe.a,{name:"email",type:"text",label:"Email address",required:!0,value:n,onChange:r,onKeyPress:s}),Object(W.jsx)(pe.a,{id:"password",name:"password",type:"password",label:"password",required:!0,value:c,onChange:r,onKeyPress:s})]}),Object(W.jsxs)("div",{className:"btn-area",children:[Object(W.jsx)(de.a,{variant:"contained",color:"primary",size:"large",onClick:t?i:o,children:t?"\uc2e0\uaddc \ub4f1\ub85d":"\ub85c\uadf8\uc778"}),Object(W.jsx)("div",{className:"spacing-area"}),Object(W.jsx)(de.a,{variant:"contained",color:"default",size:"large",onClick:a,children:t?"\ucde8\uc18c":"\uacc4\uc815 \uc0dd\uc131"})]})]})},he=function(){var e=Object(i.b)(),t=Object(c.useState)(!1),n=Object(u.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),j=o[0],b=o[1],l=Object(c.useState)(""),p=Object(u.a)(l,2),d=p[0],m=p[1],f=function(t){return e(function(e){return{type:C,obj:e}}(t))},x=function(t){return e(function(e){return{type:L,obj:e}}(t))},O=function(){var t=!0;return""===j?(e(F("\uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694")),t=!1):""===d&&(e(F("\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694")),t=!1),t},h=function(){O()&&x({email:j,password:d})};return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(Oe,{isOnRegister:a,email:j,password:d,toggleRegisterProcess:function(){return r(!a)},onChangeValue:function(e){var t=e.target,n=t.name,c=t.value;"email"===n?b(c):"password"===n&&m(c)},onPressKey:function(e){var t=e.charCode,n=e.target.name;if(13===t)if("email"===n){var c=document.querySelector("#password");c&&c.focus()}else"password"===n&&h()},handleLogin:h,onClickRegisterBtn:function(){O()&&f({email:j,password:d})}})})},ve=O.a.mark(Ae),ge=O.a.mark(Pe),ye=O.a.mark(Re),ke=O.a.mark(De),we=O.a.mark(_e),Ie="incomeInfo/READ",Ee="incomeInfo/REGISTER",Me="incomeInfo/DELETE",Se="incomeInfo/UPDATE",Ne="incomeInfo/SET_INCOME_LIST",Te="incomeInfo/SUCCESS",Ce="incomeInfo/FAIL",Le=function(e){return{type:Ee,obj:e}},Ye=function(e){return{type:Se,obj:e}};function Ae(e){var t,n;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.month,c.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){var n,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("income").where("ym","==",t).get();case 2:if(n=e.sent,!(c=n.docs)){e.next=8;break}return a=[],c.forEach((function(e){e.exists&&a.push(Object(V.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))));case 4:return n=c.sent,c.next=7,Object(h.put)({type:Ne,incomeList:n});case 7:c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0);case 12:case"end":return c.stop()}}),ve,null,[[0,9]])}function Pe(e){var t,n,c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.obj,n=t.item,c=t.curYm,a.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.collection("income").add(Object(V.a)(Object(V.a)({},n),{},{ym:c})).then((function(e){return e})).catch((function(e){return console.log(e),null})));case 1:case"end":return e.stop()}}),e)}))));case 4:if(!a.sent){a.next=10;break}return a.next=8,Object(h.put)({type:Te,msg:"\ub4f1\ub85d\ud588\uc2b5\ub2c8\ub2e4!"});case 8:a.next=12;break;case 10:return a.next=12,Object(h.put)({type:Ce,msg:"\ucc98\ub9ac\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."});case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}}),ge,null,[[0,14]])}function Re(e){var t,n,c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.obj,n=t.month,c=t.id,a.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.collection("income").doc(c).delete().then((function(){return!0})).catch((function(e){return console.log(e),!1})));case 1:case"end":return e.stop()}}),e)}))));case 4:if(!a.sent){a.next=12;break}return a.next=8,Object(h.put)({type:Te,msg:"\uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4!"});case 8:return a.next=10,Object(h.put)({type:Ie,month:n});case 10:a.next=14;break;case 12:return a.next=14,Object(h.put)({type:Ce,msg:"\ucc98\ub9ac\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."});case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),console.log(a.t0);case 19:case"end":return a.stop()}}),ye,null,[[0,16]])}function De(e){var t;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.obj.item,n.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.collection("income").doc(t.id).update(Object(V.a)({},t)).then((function(){return!0})).catch((function(e){return console.log(e),!1})));case 1:case"end":return e.stop()}}),e)}))));case 4:if(!n.sent){n.next=10;break}return n.next=8,Object(h.put)({type:Te,msg:"\uc218\uc815\ud588\uc2b5\ub2c8\ub2e4!"});case 8:n.next=12;break;case 10:return n.next=12,Object(h.put)({type:Ce,msg:"\ucc98\ub9ac\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."});case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0);case 17:case"end":return n.stop()}}),ke,null,[[0,14]])}function _e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(Ee,Pe);case 2:return e.next=4,Object(h.takeEvery)(Ie,Ae);case 4:return e.next=6,Object(h.takeEvery)(Me,Re);case 6:return e.next=8,Object(h.takeEvery)(Se,De);case 8:case"end":return e.stop()}}),we)}var Fe={incomeList:[],incomeMsg:{msg:"",isError:!1}};var Be=n(133),ze=n.n(Be),Ue=function(e){var t=e.movePage;return Object(W.jsx)("div",{className:"floating-btn",onClick:t,children:Object(W.jsx)(ze.a,{color:"primary",style:{fontSize:50}})})},Ge=n(290),Xe=function(e){var t=e.type,n=e.curItemList,c=e.showDelBtn,a=e.deleteItem,r=e.onEventHandler;return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("div",{className:"item-list-container",children:Array.isArray(n)&&n.map((function(e,n){return Object(W.jsxs)("div",{id:e.id,className:"item-info-container",children:[Object(W.jsxs)("div",{className:"item-info".concat(c===e.id?"-deletable":""),draggable:!0,onTouchStart:function(t){return r(t,e.id)},onTouchEnd:function(t){return r(t,e.id)},children:[Object(W.jsx)("div",{className:"item-text",children:e.itemTypeName}),Object(W.jsx)("div",{children:"".concat($("income"===t?e.itemAmount:e.itemPrice),"\uc6d0")})]}),c&&c===e.id&&Object(W.jsx)("div",{className:"icon",children:Object(W.jsx)(j.a,{onClick:function(){return a(e.id)},children:Object(W.jsx)(Ge.a,{})})})]},n)}))})})},qe=function(){var e=Object(o.g)(),t=Object(o.h)(),n=Object(i.b)(),a=Object(i.c)((function(e){return{incomeList:e.incomeInfo.incomeList}})).incomeList,r=Object(c.useState)(J()().format("YYYY")),s=Object(u.a)(r,2),b=s[0],l=s[1],p=Object(c.useState)(J()().format("MM")),d=Object(u.a)(p,2),m=d[0],f=d[1],x=Object(c.useState)([]),O=Object(u.a)(x,2),h=O[0],v=O[1],g=Object(c.useState)(0),y=Object(u.a)(g,2),k=y[0],w=y[1],I=Object(c.useState)(!1),E=Object(u.a)(I,2),M=E[0],S=E[1],N=Object(c.useState)({x:"",y:""}),T=Object(u.a)(N,2),C=T[0],L=T[1],Y=function(e){var t="";t="prev"===e?J()("".concat(b,"-").concat(m)).subtract(1,"months"):J()("".concat(b,"-").concat(m)).add(1,"months"),l(J()(t).format("YYYY")),f(J()(t).format("MM"))},A=Object(c.useCallback)((function(){var e;n((e={month:J()().format("".concat(b,"-").concat(m))},Object(V.a)({type:Ie},e)))}),[b,m]),P=Object(c.useCallback)((function(){var e=Array.isArray(a)?a.reduce((function(e,t){return e+t.itemAmount}),0):0;v(a),w(e)}),[a]);return Object(c.useEffect)((function(){if(t&&t.state&&t.state.targetMonth){var n=t.state.targetMonth.split("-"),c=n[0],a=n[1];e.replace({state:void 0}),l(c),f(a),A()}else A()}),[m,t]),Object(c.useEffect)((function(){P()}),[a]),Object(W.jsxs)("div",{className:"child-container",children:[Object(W.jsxs)("div",{className:"selected-month-box",children:[Object(W.jsx)("div",{className:"vertical-empty-space"}),Object(W.jsxs)("div",{className:"selected-month-info-box",children:[Object(W.jsx)(j.a,{onClick:function(){return Y("prev")},children:Object(W.jsx)(ie.a,{})}),Object(W.jsxs)("div",{className:"selected-month-texts",children:[Object(W.jsxs)("div",{className:"title",children:[Q(m),"\uc6d4 \ucda9\uc804\uae08\uc561"]}),Object(W.jsxs)("div",{className:"amount",children:[$(k),"\uc6d0"]})]}),Object(W.jsx)(j.a,{id:"next",onClick:function(){return Y("next")},children:Object(W.jsx)(ue.a,{})})]})]}),Object(W.jsx)(Xe,{type:"income",curItemList:h,showDelBtn:M,deleteItem:function(e){var t;n((t={month:J()().format("".concat(b,"-").concat(m)),id:e},{type:Me,obj:t}))},onEventHandler:function(t,n){switch(t.type){case"touchstart":L({x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY});break;case"touchend":var c=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY;if(C.x===c&&C.y===a)M?(S(""),L({x:"",y:""})):function(t){var n=Array.isArray(h)&&h.find((function(e){return e.id===t}));n&&e.push({pathname:"/add",state:{type:"income",actionType:"update",targetItem:n,targetMonth:"".concat(b,"-").concat(m)}})}(n);else{var r=Math.abs(C.x-t.changedTouches[0].pageX),s=Math.abs(C.y-t.changedTouches[0].pageY);S(r>s&&M!==n?n:""),L({x:"",y:""})}}}}),Object(W.jsx)(Ue,{movePage:function(){e.push({pathname:"/add",state:{type:"income",actionType:"add",targetMonth:"".concat(b,"-").concat(m)}})}})]})},We=O.a.mark(st),Ke=O.a.mark(ot),Ve=O.a.mark(it),He=O.a.mark(ut),Je=O.a.mark(jt),Ze="expenseInfo/READ",Qe="expenseInfo/REGISTER",$e="expenseInfo/DELETE",et="expenseInfo/UPDATE",tt="expenseInfo/SET_EXPENSE_LIST",nt="expenseInfo/SUCCESS",ct="expenseInfo/FAIL",at=function(e){return{type:Qe,obj:e}},rt=function(e){return{type:et,obj:e}};function st(e){var t,n;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.month,c.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){var n,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("expense").where("ym","==",t).get();case 2:if(n=e.sent,!(c=n.docs)){e.next=8;break}return a=[],c.forEach((function(e){e.exists&&a.push(Object(V.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))));case 4:return n=c.sent,c.next=7,Object(h.put)({type:tt,expenseList:n});case 7:c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0);case 12:case"end":return c.stop()}}),We,null,[[0,9]])}function ot(e){var t,n,c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.obj,n=t.item,c=t.curYm,a.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.collection("expense").add(Object(V.a)(Object(V.a)({},n),{},{ym:c})).then((function(e){return e})).catch((function(e){return console.log(e),null})));case 1:case"end":return e.stop()}}),e)}))));case 4:if(!a.sent){a.next=10;break}return a.next=8,Object(h.put)({type:nt,msg:"\ub4f1\ub85d\ud588\uc2b5\ub2c8\ub2e4!"});case 8:a.next=12;break;case 10:return a.next=12,Object(h.put)({type:ct,msg:"\ucc98\ub9ac\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."});case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}}),Ke,null,[[0,14]])}function it(e){var t,n,c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.obj,n=t.month,c=t.id,a.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.collection("expense").doc(c).delete().then((function(){return!0})).catch((function(e){return console.log(e),!1})));case 1:case"end":return e.stop()}}),e)}))));case 4:if(!a.sent){a.next=12;break}return a.next=8,Object(h.put)({type:nt,msg:"\uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4!"});case 8:return a.next=10,Object(h.put)({type:Ze,month:n});case 10:a.next=14;break;case 12:return a.next=14,Object(h.put)({type:ct,msg:"\ucc98\ub9ac\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."});case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),console.log(a.t0);case 19:case"end":return a.stop()}}),Ve,null,[[0,16]])}function ut(e){var t;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.obj.item,n.next=4,Object(h.call)(Object(Z.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.collection("expense").doc(t.id).update(Object(V.a)({},t)).then((function(){return!0})).catch((function(e){return console.log(e),!1})));case 1:case"end":return e.stop()}}),e)}))));case 4:if(!n.sent){n.next=10;break}return n.next=8,Object(h.put)({type:nt,msg:"\uc218\uc815\ud588\uc2b5\ub2c8\ub2e4!"});case 8:n.next=12;break;case 10:return n.next=12,Object(h.put)({type:ct,msg:"\ucc98\ub9ac\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."});case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0);case 17:case"end":return n.stop()}}),He,null,[[0,14]])}function jt(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(Qe,ot);case 2:return e.next=4,Object(h.takeEvery)(Ze,st);case 4:return e.next=6,Object(h.takeEvery)($e,it);case 6:return e.next=8,Object(h.takeEvery)(et,ut);case 8:case"end":return e.stop()}}),Je)}var bt={incomeList:[],incomeMsg:{msg:"",isError:!1}};var lt=function(){var e=Object(o.g)(),t=Object(o.h)(),n=Object(i.b)(),a=Object(i.c)((function(e){return{expenseList:e.expenseInfo.expenseList}})).expenseList,r=Object(c.useState)(J()().format("YYYY")),s=Object(u.a)(r,2),b=s[0],l=s[1],p=Object(c.useState)(J()().format("MM")),d=Object(u.a)(p,2),m=d[0],f=d[1],x=Object(c.useState)([]),O=Object(u.a)(x,2),h=O[0],v=O[1],g=Object(c.useState)(0),y=Object(u.a)(g,2),k=y[0],w=y[1],I=Object(c.useState)(!1),E=Object(u.a)(I,2),M=E[0],S=E[1],N=Object(c.useState)({x:"",y:""}),T=Object(u.a)(N,2),C=T[0],L=T[1],Y=function(e){var t="";t="prev"===e?J()("".concat(b,"-").concat(m)).subtract(1,"months"):J()("".concat(b,"-").concat(m)).add(1,"months"),l(J()(t).format("YYYY")),f(J()(t).format("MM"))},A=Object(c.useCallback)((function(){var e;n((e={month:J()().format("".concat(b,"-").concat(m))},Object(V.a)({type:Ze},e)))}),[b,m]),P=Object(c.useCallback)((function(){var e=Array.isArray(a)?a.reduce((function(e,t){return e+t.itemPrice}),0):0;v(a),w(e)}),[a]);return Object(c.useEffect)((function(){if(t&&t.state&&t.state.targetMonth){var n=t.state.targetMonth.split("-"),c=n[0],a=n[1];l(c),f(a),e.replace({state:void 0})}A()}),[m,t]),Object(c.useEffect)((function(){P()}),[a]),Object(W.jsxs)("div",{className:"child-container",children:[Object(W.jsxs)("div",{className:"selected-month-box",children:[Object(W.jsx)("div",{className:"vertical-empty-space"}),Object(W.jsxs)("div",{className:"selected-month-info-box",children:[Object(W.jsx)(j.a,{onClick:function(){return Y("prev")},children:Object(W.jsx)(ie.a,{})}),Object(W.jsxs)("div",{className:"selected-month-texts",children:[Object(W.jsxs)("div",{className:"title",children:[Q(m),"\uc6d4 \uc0ac\uc6a9\uae08\uc561"]}),Object(W.jsxs)("div",{className:"amount",children:[$(k),"\uc6d0"]})]}),Object(W.jsx)(j.a,{id:"next",onClick:function(){return Y("next")},children:Object(W.jsx)(ue.a,{})})]})]}),Object(W.jsx)(Xe,{type:"expense",curItemList:h,showDelBtn:M,deleteItem:function(e){var t;n((t={month:J()().format("".concat(b,"-").concat(m)),id:e},{type:$e,obj:t}))},onEventHandler:function(t,n){switch(t.type){case"touchstart":L({x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY});break;case"touchend":var c=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY;if(C.x===c&&C.y===a)M?(S(""),L({x:"",y:""})):function(t){var n=Array.isArray(h)&&h.find((function(e){return e.id===t}));n&&e.push({pathname:"/add",state:{type:"expense",actionType:"update",targetItem:n,targetMonth:"".concat(b,"-").concat(m)}})}(n);else{var r=Math.abs(C.x-t.changedTouches[0].pageX),s=Math.abs(C.y-t.changedTouches[0].pageY);S(r>s&&M!==n?n:""),L({x:"",y:""})}}}}),Object(W.jsx)(Ue,{movePage:function(){e.push({pathname:"/add",state:{type:"expense",actionType:"add",targetMonth:"".concat(b,"-").concat(m)}})}})]})},pt=n(287),dt=n(295),mt=n(132),ft=n(116),xt=n.n(ft),Ot=(n(183),n(138));Object(ft.registerLocale)("ko",Ot.a);var ht=function(e){var t=e.type,n=e.item,c=e.onChangeItem,a=e.onChangeDate,r=e.onClickPrevBtn,s=e.onClickSubmitBtn;return Object(W.jsxs)("div",{className:"item-container",children:[Object(W.jsx)("div",{className:"item-detail",children:"expense"===t?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(pt.a,{fullWidth:!0,children:[Object(W.jsx)(dt.a,{variant:"standard",htmlFor:"item-type-native",children:"\uad6c\ubd84"}),Object(W.jsxs)(mt.a,{defaultValue:"mart",value:n.itemType,inputProps:{name:"itemType",id:"item-type-native"},onChange:c,children:[Object(W.jsx)("option",{value:"mart",children:"\ub9c8\ud2b8"}),Object(W.jsx)("option",{value:"dineout",children:"\uc678\uc2dd"}),Object(W.jsx)("option",{value:"leisure",children:"\uc5ec\uac00"}),Object(W.jsx)("option",{value:"etc",children:"\uae30\ud0c0"})]})]}),Object(W.jsx)(pe.a,{required:!0,name:"itemPrice",label:"\uae08\uc561",value:n.itemPrice,onChange:c}),Object(W.jsx)(xt.a,{locale:"ko",selected:n.date,onChange:a,dateFormat:"yyyy-MM-dd",customInput:Object(W.jsx)(pe.a,{label:"\uc77c\uc790"}),popperModifiers:{preventOverflow:{enabled:!0}},popperPlacement:"auto"}),Object(W.jsx)(pe.a,{name:"remark",label:"\ube44\uace0",value:n.remark,onChange:c})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(pe.a,{required:!0,name:"itemAmount",label:"\uae08\uc561",value:n.itemAmount,onChange:c}),Object(W.jsx)(pe.a,{name:"remark",label:"\ube44\uace0",value:n.remark,onChange:c})]})}),Object(W.jsxs)("div",{className:"item-btn-area",children:[Object(W.jsx)(de.a,{variant:"contained",onClick:r,children:"\ub3cc\uc544\uac00\uae30"}),Object(W.jsx)(de.a,{variant:"contained",color:"primary",onClick:s,children:"\uc800\uc7a5"})]})]})},vt=function(){var e=Object(i.b)(),t=Object(o.h)(),n=Object(o.g)(),a=t.state,r=a.type,s=a.actionType,j=a.targetItem,b=a.targetMonth,l=Object(c.useState)((function(){var e={remark:""};switch(r){case"income":e.itemAmount=0;break;case"expense":e.itemPrice=0,e.date=new Date,e.itemType="mart",e.itemTypeName="\ub9c8\ud2b8"}return e})),p=Object(u.a)(l,2),d=p[0],m=p[1],f=new Map([["mart","\ub9c8\ud2b8"],["dineout","\uc678\uc2dd"],["leisure","\uc5ec\uac00"],["etc","\uae30\ud0c0"]]),x=function(){var e="",t=new Map([["add",Le],["update",Ye]]),n=new Map([["add",at],["update",rt]]);switch(r){case"income":e=t.get(s);break;case"expense":e=n.get(s)}return e};return Object(c.useEffect)((function(){j&&(j.date=new Date(j.date),m(j))}),[j,b]),Object(W.jsxs)("div",{className:"child-container",children:[Object(W.jsx)("div",{className:"vertical-empty-space"}),Object(W.jsx)("div",{className:"page-title",children:function(){var e,t="",n="",c=b.split("-");switch(e="".concat(c[0],"\ub144 ").concat(Number(c[1]),"\uc6d4"),r){case"income":t="\ucda9\uc804";break;case"expense":t="\uc0ac\uc6a9"}switch(s){case"add":n="\ucd94\uac00";break;case"update":n="\uc218\uc815"}return"".concat(e," ").concat(t," ").concat(n)}()}),Object(W.jsx)(ht,{type:r,item:d,onChangeItem:function(e){var t=e.target,n=t.name,c=t.value,a=Object(V.a)({},d),r=c;switch(n){case"priority":case"itemPrice":case"itemAmount":r=Number(r.replace(/[^0-9]/gi,""));break;case"itemType":a.itemTypeName=f.get(c)}a[n]=r,m(a)},onChangeDate:function(e){var t=Object(V.a)({},d);t.date=e,m(t)},onClickPrevBtn:function(){n.push({pathname:"/".concat(r),state:{targetMonth:b}})},onClickSubmitBtn:function(){var t=Object(V.a)({},d),n=x();if("expense"===r){var c=t.date;t.date=J()(c).format("YYYY-MM-DD")}e(n({item:t,curYm:b}))}})]})},gt=n(294),yt=n(292),kt=function(){var e=Object(o.g)(),t=Object(i.c)((function(e){return{isLoggedIn:e.userInfo.isLoggedIn,authMsg:e.userInfo.authMsg,incomeMsg:e.incomeInfo.incomeMsg,expenseMsg:e.expenseInfo.expenseMsg}})),n=t.isLoggedIn,a=t.authMsg,r=t.incomeMsg,s=t.expenseMsg,j=Object(c.useState)(!1),b=Object(u.a)(j,2),l=b[0],p=b[1],d=Object(c.useState)(""),m=Object(u.a)(d,2),f=m[0],x=m[1],O=Object(c.useState)("error"),h=Object(u.a)(O,2),v=h[0],g=h[1];return Object(c.useEffect)((function(){var t=a.msg,c=a.isError;!n&&"/"===e.location.pathname&&""!==t&&c&&(x(t),p(!0))}),[a.msg]),Object(c.useEffect)((function(){if(r){var e=r.msg,t=r.isError;n&&""!==e&&(x(e),t||g("success"),p(!0))}}),[r,n]),Object(c.useEffect)((function(){if(s){var e=s.msg,t=s.isError;n&&""!==e&&(x(e),t||g("success"),p(!0))}}),[s,n]),Object(W.jsx)(gt.a,{open:l,autoHideDuration:3e3,onClose:function(){return p(!1)},children:Object(W.jsx)(yt.a,{severity:v,elevation:6,variant:"filled",children:f})})},wt=function(){var e=Object(i.c)((function(e){return{isLoggedIn:e.userInfo.isLoggedIn}})).isLoggedIn;return Object(W.jsxs)(s.a,{basename:"/brown_card",children:[Object(W.jsx)(K,{}),Object(W.jsx)(o.d,{children:e?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.b,{exact:!0,path:"/",children:Object(W.jsx)(le,{})}),Object(W.jsx)(o.b,{exact:!0,path:"/income",children:Object(W.jsx)(qe,{})}),Object(W.jsx)(o.b,{exact:!0,path:"/expense",children:Object(W.jsx)(lt,{})}),Object(W.jsx)(o.b,{exact:!0,path:"/add",children:Object(W.jsx)(vt,{})}),Object(W.jsx)(kt,{})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(o.b,{exact:!0,path:"/",children:[Object(W.jsx)(he,{}),Object(W.jsx)(kt,{})]}),Object(W.jsx)(o.a,{to:{pathname:"/"}})]})})]})};n(226);var It=function(){return Object(W.jsx)("div",{children:Object(W.jsx)(wt,{})})},Et=n(56),Mt=n(68),St=n(136),Nt=O.a.mark(Ct),Tt=Object(Et.combineReducers)({userInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){default:return e;case A:return{isLoggedIn:!0,userObj:t.user,authMsg:{msg:"",isError:!1}};case P:return{isLoggedIn:!1,userObj:{},authMsg:{msg:"",isError:!1}};case R:case D:return{authMsg:{msg:t.msg,isError:!0}}}},incomeInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){default:return e;case Ne:return{incomeList:t.incomeList};case Te:return{incomeMsg:{msg:t.msg,isError:!1}};case Ce:return{incomeMsg:{msg:t.msg,isError:!0}}}},expenseInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){default:return e;case tt:return{expenseList:t.expenseList};case nt:return{expenseMsg:{msg:t.msg,isError:!1}};case ct:return{expenseMsg:{msg:t.msg,isError:!0}}}},summaryInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;return t.type===ae?{summary:{totalIncome:t.totalIncome,totalExpense:t.totalExpense,balance:t.balance,expensePerTypes:t.expensePerTypes}}:e}});function Ct(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.all)([X(),_e(),jt(),se()]);case 2:case"end":return e.stop()}}),Nt)}var Lt=Tt,Yt=Object(Mt.default)(),At=Object(Et.createStore)(Lt,Object(St.composeWithDevTools)(Object(Et.applyMiddleware)(Yt)));Yt.run(Ct),r.a.render(Object(W.jsx)(i.a,{store:At,children:Object(W.jsx)(It,{})}),document.getElementById("root"))}},[[228,1,2]]]);
//# sourceMappingURL=main.d6278df2.chunk.js.map